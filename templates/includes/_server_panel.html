<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spr√°va serveru - {{ server.name }}</title>

    <!-- Hlavn√≠ CSS soubory -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/server_panel.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/plugins_manager.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mods_quickview.css') }}">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <div class="server-panel">
        <div class="server-header">
            <button id="back-btn" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Zpƒõt na Dashboard
            </button>
            <h3><i class="fas fa-server"></i> Spr√°va serveru: <span id="server-name">{{ server.name }}</span></h3>
        </div>

        <div id="server-status-display">
            <div class="server-meta">
                <span id="server-loader" class="meta-badge">Loader: -</span>
                <span id="mc-version" class="meta-badge">MC: -</span>
            </div>

            <p><span class="status-indicator"></span> Status: <span class="status-text">Naƒç√≠t√°n√≠...</span></p>
            <p>RAM: <span id="ram-usage">-</span> MB</p>
            <p>CPU: <span id="cpu-usage">-</span> / <span id="cpu-max">-</span></p>
            <p>Online: <span id="player-count">-</span></p>
        </div>

        <div id="online-players-panel" class="mt-3">
            <h4><i class="fas fa-users"></i> P≈ôipojen√≠ hr√°ƒçi (<span id="player-count-display">0</span>)</h4>
            <div id="players-table-container">
                <table id="online-players-table" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Jm√©no hr√°ƒçe</th>
                        </tr>
                    </thead>
                    <tbody id="online-players-list">
                        <!-- Players will be loaded here dynamically -->
                    </tbody>
                </table>
                <div id="no-players-message" class="text-muted">
                    ≈Ω√°dn√≠ hr√°ƒçi nejsou p≈ôipojeni
                </div>
            </div>
        </div>

        <div class="server-actions mt-3">
            <button id="start-btn" class="btn btn-success"><i class="fas fa-play"></i> Start</button>
            <button id="restart-btn" class="btn btn-warning"><i class="fas fa-redo"></i> Restart</button>
            <button id="stop-btn" class="btn btn-danger"><i class="fas fa-stop"></i> Stop</button>
        </div>

        <div class="console-section">
            <div class="console-header">
                <h3><i class="fas fa-terminal"></i> Konzole serveru</h3>
            </div>

            <!-- Z√°lo≈æky -->
            <div class="console-tabs">
                <div class="tab active" data-tab="main">Hlavn√≠ konzole</div>
                <button id="add-log-tab" class="tab-add" title="Otev≈ô√≠t star√Ω log">+</button>
            </div>

            <!-- Obsah jednotliv√Ωch z√°lo≈æek -->
            <div id="console-tab-content">
                <div id="tab-main" class="tab-content active">
                    <div id="log-output" class="console-output"></div>

                    <div class="console-input-bar">
                        <input type="text" id="console-input" class="console-input" placeholder="Zadej p≈ô√≠kaz..." />
                        <button id="sendCommand" class="console-button">
                            Odeslat
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- MOD√ÅLN√ç OKNO PRO V√ùBƒöR LOGU -->
            <div id="logDialog" class="log-dialog hidden">
                <div class="log-dialog-content">
                    <h4><i class="fas fa-history"></i> Vyber star√Ω log</h4>
                    <div id="logList" class="log-list"></div>
                    <div class="dialog-actions">
                        <button id="closeLogDialog" class="dialog-btn cancel">Zav≈ô√≠t</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="backup-panel">
            <h3><i class="fas fa-file-archive"></i> Spr√°va z√°loh</h3>

            <div class="backup-actions mb-3">
                <button id="create-backup-btn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Vytvo≈ôit z√°lohu
                </button>
                <input type="text" id="backup-name" placeholder="N√°zev z√°lohy (voliteln√©)" class="form-control">
            </div>

            <div class="backup-list-container">
                <h4>Dostupn√© z√°lohy</h4>
                <div id="backup-list" class="backup-list">
                    <!-- Z√°lohy se naƒçtou dynamicky -->
                </div>
            </div>
        </div>

        <div class="disk-usage-panel">
            <h3><i class="fas fa-hdd"></i> Vyu≈æit√≠ disku</h3>

            <div class="combined-progress mb-3">
                <div id="server-usage-bar" class="progress-bar server-bar" style="width: 0%" title="Server"></div>
                <div id="backup-usage-bar" class="progress-bar backup-bar" style="width: 0%" title="Z√°lohy"></div>
            </div>

            <div class="disk-usage-details">
                <div class="usage-item">
                    <span class="usage-label"> Server:</span>
                    <span id="server-usage-text" class="usage-value">-</span>
                </div>
                <div class="usage-item">
                    <span class="usage-label"> Z√°lohy:</span>
                    <span id="backup-usage-text" class="usage-value">-</span>
                </div>
                <div class="usage-item">
                    <span class="usage-label"> Vyu≈æito:</span>
                    <span id="total-usage-text" class="usage-value">-</span>
                </div>
                <div class="usage-item">
                    <span class="usage-label"> Poƒçet z√°loh:</span>
                    <span id="backup-count" class="usage-value">-</span>
                </div>
            </div>
        </div>

        <div class="client-tools-section">
            <h3><i class="fas fa-toolbox"></i> N√°stroje pro hr√°ƒçe</h3>
            <div id="client-tools-container"></div>
        </div>

        <!-- Sekce informac√≠ pro hr√°ƒçe -->
        <div class="player-info-section">
            <div class="server-panel">
                <div class="section-header" data-section="player-info">
                    <h3><i class="fas fa-info-circle"></i> Informace pro hr√°ƒçe</h3>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>

                <div class="section-content" id="player-info-content" style="display: none;">
                    <!-- Pro adminy: formul√°≈ô pro vytvo≈ôen√≠ ozn√°men√≠ -->
                    <!-- Vylep≈°en√Ω formul√°≈ô pro ozn√°men√≠ -->
                    <div id="notice-management-panel" style="display: none;">
                        <div class="create-notice-form mb-4">
                            <h4><i class="fas fa-plus"></i> Nov√© ozn√°men√≠</h4>
                            <div class="form-group">
                                <label for="notice-title">Nadpis:</label>
                                <input type="text" id="notice-title" class="form-control" placeholder="N√°zev ozn√°men√≠">
                            </div>

                            <!-- Textov√© n√°stroje -->
                            <div class="text-toolbar mb-2">
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="bold" data-tooltip="Tuƒçn√©">
                                    <i class="fas fa-bold"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="italic" data-tooltip="Kurz√≠va">
                                    <i class="fas fa-italic"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="underline" data-tooltip="Podtr≈æen√≠">
                                    <i class="fas fa-underline"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="code" data-tooltip="K√≥d">
                                    <i class="fas fa-code"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="link" data-tooltip="Vlo≈æit odkaz">
                                    <i class="fas fa-link"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="list-ul" data-tooltip="Odr√°≈æky">
                                    <i class="fas fa-list-ul"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary text-tool-btn"
                                    data-tag="list-ol" data-tooltip="ƒå√≠slovan√Ω seznam">
                                    <i class="fas fa-list-ol"></i>
                                </button>
                            </div>

                            <div class="form-group">
                                <label for="notice-content">Obsah:</label>
                                <textarea id="notice-content" class="form-control" rows="6"
                                    placeholder="Text ozn√°men√≠... M≈Ø≈æete pou≈æ√≠t **tuƒçn√Ω text**, *kurz√≠vu* nebo [odkaz](https://example.com)"></textarea>
                                <small class="form-text text-muted">
                                    Podporuje z√°kladn√≠ form√°tov√°n√≠: **tuƒçn√Ω**, *kurz√≠va*, `k√≥d`, [odkaz](url)
                                </small>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="notice-type">Typ:</label>
                                    <select id="notice-type" class="form-control">
                                        <option value="info">‚ÑπÔ∏è Informace</option>
                                        <option value="warning">‚ö†Ô∏è Varov√°n√≠</option>
                                        <option value="important">üîî D≈Øle≈æit√©</option>
                                        <option value="update">üîÑ Aktualizace</option>
                                        <option value="event">üéâ Event</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-6">
                                    <div class="form-check mt-4">
                                        <input type="checkbox" id="notice-pinned" class="form-check-input">
                                        <label for="notice-pinned" class="form-check-label">
                                            <i class="fas fa-thumbtack"></i> P≈ôipnout nahoru
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <button id="create-notice-btn" class="btn btn-success">
                                <i class="fas fa-save"></i> Vytvo≈ôit ozn√°men√≠
                            </button>
                        </div>
                    </div>

                    <!-- Seznam ozn√°men√≠ -->
                    <div class="notices-list">
                        <div id="notices-container">
                            <!-- Ozn√°men√≠ se naƒçtou dynamicky -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sekce pro spr√°vu modpack≈Ø (zobraz√≠ se pouze pro mod servery) -->
        <div class="modpacks-management-section" style="display: none;">
            <div class="server-panel">
                <h3><i class="fas fa-cube"></i> Spr√°va modpack≈Ø</h3>

                <!-- Formul√°≈ô pro vytvo≈ôen√≠ nov√©ho modpacku - rozbalovac√≠ -->
                <div class="create-modpack-form mb-4">
                    <div class="section-header" data-section="create-modpack">
                        <h4><i class="fas fa-plus-circle"></i> Vytvo≈ôit nov√Ω modpack</h4>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="section-content" id="create-modpack-content" style="display: none;">
                        <div class="form-group">
                            <label for="modpack-name">N√°zev modpacku:</label>
                            <input type="text" id="modpack-name" class="form-control"
                                placeholder="Nap≈ô. Technick√Ω modpack">
                        </div>
                        <div class="form-group">
                            <label for="modpack-description">Popis (voliteln√©):</label>
                            <textarea id="modpack-description" class="form-control" rows="2"
                                placeholder="Popis bal√≠ƒçku..."></textarea>
                        </div>

                        <div class="available-mods-list mb-3">
                            <h5>Vyberte m√≥dy pro modpack:</h5>
                            <div id="mods-checklist" class="mods-checklist">
                                <!-- M√≥dy se naƒçtou dynamicky -->
                            </div>
                        </div>

                        <button id="create-modpack-btn" class="btn btn-success">
                            <i class="fas fa-file-archive"></i> Vytvo≈ôit modpack
                        </button>
                    </div>
                </div>

                <!-- Seznam existuj√≠c√≠ch modpack≈Ø - rozbalovac√≠ -->
                <div class="existing-modpacks">
                    <div class="section-header" data-section="modpacks-list">
                        <h4><i class="fas fa-list"></i> Existuj√≠c√≠ modpacky</h4>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="section-content" id="modpacks-list-content" style="display: none;">
                        <div id="modpacks-list" class="modpacks-list">
                            <!-- Modpacky se naƒçtou dynamicky -->
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div id="admin-management-panel" style="display: none;">
            <h3><i class="fas fa-user-shield"></i> Spr√°va administr√°tor≈Ø</h3>
            <input type="email" id="admin-email-input" class="form-control mb-2" placeholder="Email admina">
            <button id="add-admin-btn" class="btn btn-primary mb-3">P≈ôidat admina</button>

            <h4>Seznam administr√°tor≈Ø</h4>
            <ul id="admin-list" class="list-group mb-3">
                <!-- Seznam admin≈Ø se naƒçte zde -->
            </ul>
        </div>

        <div id="player-access-management" style="display: none;">
            <h4><i class="fas fa-key"></i> Spr√°va p≈ô√≠stupov√Ωch k√≥d≈Ø</h4>

            <div class="generate-code-form mb-3">
                <button id="generate-code-btn" class="btn btn-primary mb-2">
                    <i class="fas fa-plus"></i> Vygenerovat nov√Ω k√≥d
                </button>
                <div class="form-inline">
                    <label>Platnost (hodiny):</label>
                    <input type="number" id="expires-hours" class="form-control form-control-sm" value="24" min="1">
                    <label>Max pou≈æit√≠:</label>
                    <input type="number" id="max-uses" class="form-control form-control-sm" placeholder="Neomezenƒõ"
                        min="1">
                </div>
            </div>

            <div id="generated-code-result" class="alert alert-success" style="display: none;"></div>

            <div class="codes-list">
                <h5>Aktivn√≠ k√≥dy</h5>
                <div id="access-codes-list">
                    <!-- K√≥dy se naƒçtou dynamicky -->
                </div>
            </div>
        </div>



        <!-- Sekce pro pluginy (bude zobrazena pouze pro plugin servery) -->
        <div class="plugins-quickview" style="display: none;">
            <h3><i class="fas fa-puzzle-piece"></i> Nainstalovan√© pluginy</h3>
            <div id="installed-plugins-quickview" class="plugins-list">
                <!-- Naƒçte se dynamicky -->
            </div>
            <button id="manage-plugins-btn" class="btn btn-primary">
                <i class="fas fa-cog"></i> Spravovat pluginy
            </button>
        </div>

        <!-- Sekce pro m√≥dy (bude zobrazena pouze pro mod servery) -->
        <div class="mods-quickview" style="display: none;">
            <h3><i class="fas fa-puzzle-piece"></i> Nainstalovan√© mody</h3>
            <div id="installed-mods-quickview" class="mods-list">
                <!-- Naƒçte se dynamicky -->
            </div>
            <button id="manage-mods-btn" class="btn btn-primary"
                style="background-color: #9f7aea; border-color: #805ad5;">
                <i class="fas fa-cog"></i> Spravovat mody
            </button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/server_panel.js') }}"></script>
</body>

</html>